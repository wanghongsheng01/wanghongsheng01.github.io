import{d as e,r as a,V as l,E as t,L as s,e as u,w as r,i as n,f as i,g as o,J as c,j as d,k as v,t as f,n as m}from"./index-BWcxsYn8.js";import{N as _}from"./NavigationBar.BembfXLU.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=p(e({__name:"news-detail",setup(e){const p=a(null),y=a(!1),h=a(!0);return l(e=>{try{if(h.value=!0,e.data)try{const a=JSON.parse(decodeURIComponent(e.data));p.value=a,a.publishTime&&a.trainStartDate&&(y.value=new Date(a.publishTime.replace(/-/g,"/"))>=new Date(a.trainStartDate.replace(/-/g,"/")))}catch(a){console.error("解析data参数失败",a),p.value=null}else if(e.id)try{const e=t("currentNews");if(e){const a=JSON.parse(e);p.value=a,s("currentNews")}else console.error("未找到资讯数据"),p.value=null}catch(l){console.error("从storage读取失败",l),p.value=null}else console.error("缺少必要的参数"),p.value=null}catch(u){console.error("解析资讯详情失败",u),p.value=null}finally{h.value=!1}}),(e,a)=>{const l=d,t=n;return i(),u(t,{class:"news-detail-page"},{default:r(()=>{var e;return[o(_,{title:(null==(e=p.value)?void 0:e.title)||"资讯详情"},null,8,["title"]),p.value?(i(),u(t,{key:0,class:"page-content"},{default:r(()=>[p.value.symbol?(i(),u(t,{key:0,class:"header"},{default:r(()=>[o(l,{class:"symbol"},{default:r(()=>[v(f(p.value.symbol),1)]),_:1}),p.value.publishTime?(i(),u(l,{key:0,class:"time"},{default:r(()=>[v(f(p.value.publishTime),1)]),_:1})):c("",!0)]),_:1})):c("",!0),o(l,{class:"title"},{default:r(()=>[v(f(p.value.title),1)]),_:1}),p.value.trainStartDate?(i(),u(t,{key:1,class:"meta"},{default:r(()=>[o(l,{class:"meta-item"},{default:r(()=>[v("训练起始日: "+f(p.value.trainStartDate),1)]),_:1}),p.value.publishTime?(i(),u(l,{key:0,class:"meta-item"},{default:r(()=>[v("资讯发布时间晚于训练起始: "),o(l,{class:m({warn:y.value})},{default:r(()=>[v(f(y.value?"是":"否"),1)]),_:1},8,["class"])]),_:1})):c("",!0)]),_:1})):c("",!0),p.value.publishedAt?(i(),u(t,{key:2,class:"publish-time"},{default:r(()=>[o(l,{class:"time-label"},{default:r(()=>[v("发布时间：")]),_:1}),o(l,{class:"time-value"},{default:r(()=>[v(f(p.value.publishedAt),1)]),_:1})]),_:1})):c("",!0),o(l,{class:"content"},{default:r(()=>[v(f(p.value.content||p.value.summary),1)]),_:1})]),_:1})):h.value?(i(),u(t,{key:1,class:"loading"},{default:r(()=>[o(l,null,{default:r(()=>[v("加载中...")]),_:1})]),_:1})):(i(),u(t,{key:2,class:"error"},{default:r(()=>[o(l,null,{default:r(()=>[v("资讯不存在或加载失败")]),_:1})]),_:1}))]}),_:1})}}}),[["__scopeId","data-v-e5067a7a"]]);export{y as default};
